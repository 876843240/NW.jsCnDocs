<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Understanding Crash Dump - NW.js Documentation</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Understanding Crash Dump";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> NW.js Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>For Developers</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Building%20NW.js/">Building NW.js</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Contributing%20to%20NW.js/">Contributing to NW.js</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Contributors%20of%20Documents/">Contributors of Documents</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Enable%20Proprietary%20Codecs/">Enable Proprietary Codecs</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Repositories/">Repositories</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Understanding Crash Dump</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#understanding-crash-dump-doctitle">Understanding Crash Dump {: .doctitle}</a></li>
                
                    <li><a class="toctree-l4" href="#find-minidump-file">Find Minidump File</a></li>
                
                    <li><a class="toctree-l4" href="#organize-symbol-files">Organize Symbol Files</a></li>
                
                    <li><a class="toctree-l4" href="#decode-minidump-with-minidump_stackwalk">Decode Minidump with minidump_stackwalk</a></li>
                
                    <li><a class="toctree-l4" href="#trigger-crash-for-testing">Trigger Crash for Testing</a></li>
                
                    <li><a class="toctree-l4" href="#references">References</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Writing%20Documents%20for%20NW.js/">Writing Documents for NW.js</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../Writing%20Test%20Cases%20for%20NW.js/">Writing Test Cases for NW.js</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>For Users</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Debugging%20with%20DevTools/">Debugging with DevTools</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/FAQ/">FAQ</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Getting%20Started/">Getting Started</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Package%20and%20Distribute/">Package and Distribute</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Advanced</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/Build%20Flavors/">Build Flavors</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/Content%20Verification/">Content Verification</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/">JavaScript Contexts in NW.js</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/Protect%20JavaScript%20Source%20Code/">Protect JavaScript Source Code</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/Security%20in%20NW.js/">Security in NW.js</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/Test%20with%20ChromeDriver/">Test with ChromeDriver</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/Transparent%20Window/">Transparent Window</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/Use%20NaCl%20in%20NW.js/">Use NaCl in NW.js</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Advanced/Use%20Native%20Node%20Modules/">Use Native Node Modules</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Migration</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../For%20Users/Migration/From%200.12%20to%200.13/">From 0.12 to 0.13</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>References</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/App/">App</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Changes%20to%20DOM/">Changes to DOM</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Changes%20to%20Node/">Changes to Node</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Clipboard/">Clipboard</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Command%20Line%20Options/">Command Line Options</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Manifest%20Format/">Manifest Format</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Menu/">Menu</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/MenuItem/">MenuItem</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Screen/">Screen</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Shell/">Shell</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Shortcut/">Shortcut</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Tray/">Tray</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/Window/">Window</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../References/webview%20Tag/">webview Tag</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">NW.js Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>For Developers &raquo;</li>
        
      
    
    <li>Understanding Crash Dump</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="understanding-crash-dump-doctitle">Understanding Crash Dump {: .doctitle}</h1>
<hr />
<div class="toc">
<ul>
<li><a href="#understanding-crash-dump-doctitle">Understanding Crash Dump {: .doctitle}</a><ul>
<li><a href="#find-minidump-file">Find Minidump File</a></li>
<li><a href="#organize-symbol-files">Organize Symbol Files</a></li>
<li><a href="#decode-minidump-with-minidump_stackwalk">Decode Minidump with minidump_stackwalk</a></li>
<li><a href="#trigger-crash-for-testing">Trigger Crash for Testing</a></li>
<li><a href="#references">References</a></li>
</ul>
</li>
</ul>
</div>
<p>Once NW.js crashed, a <code>minidump</code> file (<code>.dmp</code>) will be generated on disk. Users can include it in the bug report. You can decode the <code>minidump</code> file to get the stack trace when crashed. So it's helpful to find out what's wrong with NW.js in certain cases.</p>
<p>To extract the stack trace from the <code>minidump</code> file, you need three things: the minidump (<code>.dmp</code>) file generated from the crash, symbols file of NW.js binary and the <code>minidump_stackwalk</code> tool.</p>
<h2 id="find-minidump-file">Find Minidump File</h2>
<p>The minidump file will be generated in the following default directories when NW.js crashed:</p>
<ul>
<li>Linux: <code>~/.config/&lt;name-in-manifest&gt;/Crash\ Reports/</code></li>
<li>Windows: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992%28v=vs.85%29.aspx">System temporary directory</a></li>
<li>Mac: <code>~/Library/Application\ Support/&lt;name-in-manifest&gt;/CrashPad/</code></li>
</ul>
<p>The <code>&lt;name-in-manifest&gt;</code> is the <code>name</code> field of <a href="../../References/Manifest%20Format/#name">Manifest file</a>.</p>
<p>!!! note "Strip Headers from Linux Minidump File"
    Minidump file generated on Linux has additional headers in text format. They have to be stripped off before decoding. The real content of minidump file starts with <code>MDMP</code> followed by unreadable binaries. So simply delete the text before <code>MDMP</code>.</p>
<h2 id="organize-symbol-files">Organize Symbol Files</h2>
<p>Packages of symbol files for released NW.js can be found within the same folder of NW.js download folder. The symbol files (.sym) can be extracted from the downloaded packages.</p>
<p>Then you have to organize the symbol files in a <strong>correct path with correct file name</strong> in order be used by <code>minidump_stackwalk</code> tool. <code>minidump_stackwalk</code> uses <a href="https://code.google.com/p/chromium/codesearch#chromium/src/breakpad/src/processor/simple_symbol_supplier.cc&amp;l=142">simple symbol supplier</a> to find symbol files. Following is the way of how it finds the symbol files.</p>
<p>The tool will try to search the <code>.sym</code> file as in following pattern:
<code>{SYMBOLS_ROOT}/{DEBUG_FILE_NAME}/{DEBUG_IDENTIFIER}/{DEBUG_FILE_NAME_WITHOUT_PDB}.sym</code></p>
<ul>
<li><code>{SYMBOLS_ROOT}</code> is the root folder of all symbol files. You can put all versions / platforms of NW <code>.sym</code> files in a same folder.</li>
<li><code>{DEBUG_FILE_NAME}</code>, <code>{DEBUG_IDENTIFIER}</code> and <code>{DEBUG_FILE_NAME_WITHOUT_PDB}</code> can be obtained from the first line of <code>.sym</code> file which typically looks like <code>MODULE Linux x86_64 265BDB6BE043D5C70D3A1E279A8F0B1A0 nw</code>.<ul>
<li><code>265BDB6BE043D5C70D3A1E279A8F0B1A0</code> is <code>{DEBUG_IDENTIFIER}</code></li>
<li><code>nw</code> is <code>{DEBUG_FILE_NAME}</code>.</li>
<li><code>{DEBUG_FILE_NAME_WITHOUT_PDB}</code> can be converted from <code>{DEBUG_FILE_NAME}</code> by removing <code>.pdb</code> extension which is only necessary for Windows.</li>
</ul>
</li>
</ul>
<h2 id="decode-minidump-with-minidump_stackwalk">Decode Minidump with <code>minidump_stackwalk</code></h2>
<p><code>minidump_stackwalk</code> can be built with NW.js or from breakpad source code directly on Mac and Linux. Or you can install prebuilt from Cygwin on Windows.</p>
<p>To get the stack trace from <code>minidump</code> file, run following command:</p>
<pre><code class="bash">minidump_stackwalk minidump_file.dmp /path/to/symbols_root 2&gt;&amp;1
</code></pre>

<p>If the symbol files were not organized correctly, you still can get call stack from this tool. But you will not see symbols and there will be a warning in last section of output - "Loaded modules" like this:</p>
<pre><code class="none">0x00240000 - 0x02b29fff nw.exe ??? (main) (WARNING: No symbols, nw.exe.pdb, 669008F7B6EE44058CBD5F21BEB5B5CFe)
</code></pre>

<h2 id="trigger-crash-for-testing">Trigger Crash for Testing</h2>
<p>To test the crash dump feature, you can trigger the crash on purpose with APIs provided by NW.js: <code>App.crashBrowser()</code> and <code>App.crashRenderer()</code>. They crash the browser process and the renderer process respectively.</p>
<h2 id="references">References</h2>
<ul>
<li>http://www.chromium.org/developers/decoding-crash-dumps  </li>
<li>http://code.google.com/p/google-breakpad/wiki/GettingStartedWithBreakpad</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Writing%20Documents%20for%20NW.js/" class="btn btn-neutral float-right" title="Writing Documents for NW.js"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Repositories/" class="btn btn-neutral" title="Repositories"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Repositories/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Writing%20Documents%20for%20NW.js/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
